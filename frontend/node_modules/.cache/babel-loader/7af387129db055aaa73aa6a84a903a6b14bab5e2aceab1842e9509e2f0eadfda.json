{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nexport default {\n  name: 'UserListView',\n  data() {\n    return {\n      currentUsername: '',\n      users: [],\n      searchForm: {\n        name: '',\n        gender: '',\n        age: null,\n        food: '',\n        searchType: 'AND'\n      }\n    };\n  },\n  created() {\n    this.currentUsername = localStorage.getItem('username') || 'ゲスト';\n    this.loadAllUsers();\n  },\n  methods: {\n    async loadAllUsers() {\n      try {\n        const response = await fetch('http://localhost:8081/api/users/list');\n        const data = await response.json();\n        console.log('取得したユーザーデータ:', data);\n        console.log('最初のユーザーのfavoriteFoods:', data[0]?.favoriteFoods);\n        this.users = data;\n      } catch (error) {\n        console.error('ユーザー一覧の取得に失敗しました', error);\n      }\n    },\n    async handleSearch() {\n      const params = new URLSearchParams();\n      if (this.searchForm.name) {\n        params.append('name', this.searchForm.name);\n      }\n      if (this.searchForm.gender) {\n        params.append('gender', this.searchForm.gender);\n      }\n      if (this.searchForm.age) {\n        params.append('age', this.searchForm.age);\n      }\n      if (this.searchForm.food) {\n        params.append('food', this.searchForm.food);\n      }\n      params.append('searchType', this.searchForm.searchType);\n      try {\n        const response = await fetch(`http://localhost:8081/api/users/search?${params.toString()}`);\n        const data = await response.json();\n        this.users = data;\n      } catch (error) {\n        console.error('検索に失敗しました', error);\n      }\n    },\n    handleReset() {\n      this.searchForm = {\n        name: '',\n        gender: '',\n        age: null,\n        food: '',\n        searchType: 'AND'\n      };\n      this.loadAllUsers();\n    },\n    handleLogout() {\n      localStorage.removeItem('username');\n      this.$router.push('/login');\n    },\n    goToEdit(userId) {\n      this.$router.push(`/users/${userId}/edit`);\n    },\n    async handleDelete(userId) {\n      if (!confirm('本当に削除しますか？')) {\n        return;\n      }\n      try {\n        const response = await fetch(`http://localhost:8081/api/users/${userId}`, {\n          method: 'DELETE'\n        });\n        const data = await response.json();\n        if (data.success) {\n          alert('削除しました');\n          this.loadAllUsers();\n        } else {\n          alert(data.error || '削除に失敗しました');\n        }\n      } catch (error) {\n        console.error('削除に失敗しました', error);\n        alert('削除に失敗しました');\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","currentUsername","users","searchForm","gender","age","food","searchType","created","localStorage","getItem","loadAllUsers","methods","response","fetch","json","console","log","favoriteFoods","error","handleSearch","params","URLSearchParams","append","toString","handleReset","handleLogout","removeItem","$router","push","goToEdit","userId","handleDelete","confirm","method","success","alert"],"sources":["/Users/taharak_tabthinkmacbookpro/eclipse-workspace /tabthink-learning/frontend/src/views/UserListView.vue"],"sourcesContent":["<template>\n  <div class=\"user-list-container\">\n    <div class=\"header\">\n      <div class=\"welcome\">こんにちは {{ currentUsername }}さん</div>\n      <button @click=\"handleLogout\" class=\"logout-btn\">ログアウト</button>\n    </div>\n    \n    <h1>ユーザー一覧</h1>\n    \n    <div class=\"search-section\">\n      <h2>検索条件</h2>\n      <div class=\"search-form\">\n        <div class=\"form-row\">\n          <div class=\"form-group\">\n            <label>名前</label>\n            <input v-model=\"searchForm.name\" type=\"text\" placeholder=\"部分一致\" />\n          </div>\n          \n\t\t<div class=\"form-group\">\n\t\t\t<label>性別</label>\n\t\t\t<select v-model=\"searchForm.gender\">\n\t\t\t\t<option value=\"\">すべて</option>\n\t\t\t\t<option value=\"男性\">男性</option>\n\t\t\t\t<option value=\"女性\">女性</option>\n\t\t\t\t<option value=\"その他\">その他</option>\n\t\t\t</select>\n\t\t</div>\n          \n          <div class=\"form-group\">\n            <label>年齢</label>\n            <input v-model.number=\"searchForm.age\" type=\"number\" placeholder=\"完全一致\" />\n          </div>\n          \n          <div class=\"form-group\">\n            <label>好きな食べ物</label>\n            <input v-model=\"searchForm.food\" type=\"text\" placeholder=\"部分一致\" />\n          </div>\n        </div>\n        \n        <div class=\"form-row\">\n          <div class=\"form-group\">\n            <label>検索タイプ</label>\n            <div class=\"radio-group\">\n              <label>\n                <input type=\"radio\" v-model=\"searchForm.searchType\" value=\"AND\" />\n                AND検索\n              </label>\n              <label>\n                <input type=\"radio\" v-model=\"searchForm.searchType\" value=\"OR\" />\n                OR検索\n              </label>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"button-group\">\n          <button @click=\"handleSearch\" class=\"search-btn\">検索</button>\n          <button @click=\"handleReset\" class=\"reset-btn\">リセット</button>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"result-section\">\n      <h2>検索結果 ({{ users.length }}件)</h2>\n      \n      <div v-if=\"users.length === 0\" class=\"no-data\">\n        データがありません\n      </div>\n      \n      <table v-else class=\"user-table\">\n        <thead>\n          <tr>\n            <th>No.</th>\n            <th>名前</th>\n            <th>性別</th>\n            <th>年齢</th>\n            <th>郵便番号</th>\n            <th>住所</th>\n            <th>電話番号</th>\n            <th>国籍</th>\n            <th>好きな食べ物</th>\n            <th>メニュー</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"(user, index) in users\" :key=\"user.id\">\n            <td>{{ index + 1 }}</td>\n            <td>{{ user.name }}</td>\n            <td>{{ user.gender }}</td>\n            <td>{{ user.age }}</td>\n            <td>{{ user.postalCode }}</td>\n            <td>{{ user.prefecture }}{{ user.city }}{{ user.address }}</td>\n            <td>{{ user.phoneNumber }}</td>\n            <td>{{ user.nationality }}</td>\n            <td>\n              <template v-if=\"user.favoriteFoods && user.favoriteFoods.length > 0\">\n                {{ user.favoriteFoods.join(', ') }}\n              </template>\n              <template v-else>\n                なし\n              </template>\n            </td>\n            <td>\n              <button @click=\"goToEdit(user.id)\" class=\"edit-btn\">\n                編集\n              </button>\n              <button @click=\"handleDelete(user.id)\" class=\"delete-btn\">\n                削除\n              </button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'UserListView',\n  data() {\n    return {\n      currentUsername: '',\n      users: [],\n      searchForm: {\n        name: '',\n        gender: '',\n        age: null,\n        food: '',\n        searchType: 'AND'\n      }\n    }\n  },\n  created() {\n    this.currentUsername = localStorage.getItem('username') || 'ゲスト'\n    this.loadAllUsers()\n  },\n  methods: {\n    async loadAllUsers() {\n      try {\n        const response = await fetch('http://localhost:8081/api/users/list')\n        const data = await response.json()\n        console.log('取得したユーザーデータ:', data)\n        console.log('最初のユーザーのfavoriteFoods:', data[0]?.favoriteFoods)\n        this.users = data\n      } catch (error) {\n        console.error('ユーザー一覧の取得に失敗しました', error)\n      }\n    },\n    async handleSearch() {\n      const params = new URLSearchParams()\n      \n      if (this.searchForm.name) {\n        params.append('name', this.searchForm.name)\n      }\n      if (this.searchForm.gender) {\n        params.append('gender', this.searchForm.gender)\n      }\n      if (this.searchForm.age) {\n        params.append('age', this.searchForm.age)\n      }\n      if (this.searchForm.food) {\n        params.append('food', this.searchForm.food)\n      }\n      params.append('searchType', this.searchForm.searchType)\n      \n      try {\n        const response = await fetch(\n          `http://localhost:8081/api/users/search?${params.toString()}`\n        )\n        const data = await response.json()\n        this.users = data\n      } catch (error) {\n        console.error('検索に失敗しました', error)\n      }\n    },\n    handleReset() {\n      this.searchForm = {\n        name: '',\n        gender: '',\n        age: null,\n        food: '',\n        searchType: 'AND'\n      }\n      this.loadAllUsers()\n    },\n    handleLogout() {\n      localStorage.removeItem('username')\n      this.$router.push('/login')\n    },\n    goToEdit(userId) {\n      this.$router.push(`/users/${userId}/edit`)\n    },\n    async handleDelete(userId) {\n      if (!confirm('本当に削除しますか？')) {\n        return\n      }\n      \n      try {\n        const response = await fetch(\n          `http://localhost:8081/api/users/${userId}`,\n          { method: 'DELETE' }\n        )\n        const data = await response.json()\n        \n        if (data.success) {\n          alert('削除しました')\n          this.loadAllUsers()\n        } else {\n          alert(data.error || '削除に失敗しました')\n        }\n      } catch (error) {\n        console.error('削除に失敗しました', error)\n        alert('削除に失敗しました')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.user-list-container {\n  padding: 20px;\n  max-width: 100%;\n  margin: 0 auto;\n  overflow-x: auto;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.welcome {\n  font-size: 18px;\n  font-weight: bold;\n}\n\n.logout-btn {\n  padding: 8px 16px;\n  background-color: #f44336;\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n}\n\n.logout-btn:hover {\n  background-color: #d32f2f;\n}\n\nh1 {\n  margin-bottom: 20px;\n}\n\n.search-section {\n  background-color: #f5f5f5;\n  padding: 20px;\n  border-radius: 8px;\n  margin-bottom: 20px;\n}\n\nh2 {\n  margin-bottom: 15px;\n}\n\n.search-form .form-row {\n  display: flex;\n  gap: 15px;\n  margin-bottom: 15px;\n  flex-wrap: wrap;\n}\n\n.form-group {\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  min-width: 150px;\n}\n\n.form-group label {\n  margin-bottom: 5px;\n  font-weight: bold;\n}\n\n.form-group input,\n.form-group select {\n  padding: 8px;\n  border: 1px solid #ddd;\n  border-radius: 4px;\n}\n\n.radio-group {\n  display: flex;\n  gap: 15px;\n}\n\n.radio-group label {\n  display: flex;\n  align-items: center;\n  gap: 5px;\n  font-weight: normal;\n}\n\n.button-group {\n  display: flex;\n  gap: 10px;\n}\n\n.search-btn,\n.reset-btn {\n  padding: 10px 20px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  font-weight: bold;\n}\n\n.search-btn {\n  background-color: #4CAF50;\n  color: white;\n}\n\n.search-btn:hover {\n  background-color: #45a049;\n}\n\n.reset-btn {\n  background-color: #9E9E9E;\n  color: white;\n}\n\n.reset-btn:hover {\n  background-color: #757575;\n}\n\n.result-section {\n  margin-top: 20px;\n}\n\n.no-data {\n  text-align: center;\n  padding: 40px;\n  color: #999;\n}\n\n.user-table {\n  width: 100%;\n  border-collapse: collapse;\n  background-color: white;\n  table-layout: auto;\n}\n\n.user-table th,\n.user-table td {\n  padding: 12px;\n  text-align: left;\n  border-bottom: 1px solid #ddd;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.user-table th {\n  background-color: #f5f5f5;\n  font-weight: bold;\n}\n\n.user-table tr:hover {\n  background-color: #f9f9f9;\n}\n\n.user-table td:nth-child(9) {\n  white-space: normal;\n  min-width: 150px;\n  max-width: 250px;\n}\n\n.edit-btn,\n.delete-btn {\n  padding: 6px 12px;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n  margin-right: 5px;\n}\n\n.edit-btn {\n  background-color: #2196F3;\n  color: white;\n}\n\n.edit-btn:hover {\n  background-color: #0b7dda;\n}\n\n.delete-btn {\n  background-color: #f44336;\n  color: white;\n}\n\n.delete-btn:hover {\n  background-color: #d32f2f;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}