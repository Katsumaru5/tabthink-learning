{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"core-js/modules/web.url-search-params.delete.js\";\nimport \"core-js/modules/web.url-search-params.has.js\";\nimport \"core-js/modules/web.url-search-params.size.js\";\nexport default {\n  name: 'UserListView',\n  data() {\n    return {\n      currentUsername: '',\n      users: [],\n      searchForm: {\n        name: '',\n        gender: '',\n        age: null,\n        food: '',\n        searchType: 'AND'\n      }\n    };\n  },\n  created() {\n    this.currentUsername = localStorage.getItem('username') || 'ゲスト';\n    this.loadAllUsers();\n  },\n  methods: {\n    async loadAllUsers() {\n      try {\n        const response = await fetch('http://localhost:8081/api/users/list');\n        const data = await response.json();\n        console.log('取得したユーザーデータ:', data);\n        console.log('最初のユーザーのfavoriteFoods:', data[0]?.favoriteFoods);\n        this.users = data;\n      } catch (error) {\n        console.error('ユーザー一覧の取得に失敗しました', error);\n      }\n    },\n    async handleSearch() {\n      const params = new URLSearchParams();\n      if (this.searchForm.name) params.append('name', this.searchForm.name);\n      if (this.searchForm.gender) params.append('gender', this.searchForm.gender);\n      if (this.searchForm.age) params.append('age', this.searchForm.age);\n      if (this.searchForm.food) params.append('food', this.searchForm.food);\n      params.append('searchType', this.searchForm.searchType);\n      try {\n        const response = await fetch(`http://localhost:8081/api/users/search?${params.toString()}`);\n        const data = await response.json();\n        this.users = data;\n      } catch (error) {\n        console.error('検索に失敗しました', error);\n      }\n    },\n    handleReset() {\n      this.searchForm = {\n        name: '',\n        gender: '',\n        age: null,\n        food: '',\n        searchType: 'AND'\n      };\n      this.loadAllUsers();\n    },\n    handleLogout() {\n      localStorage.removeItem('username');\n      this.$router.push('/login');\n    },\n    goToEdit(userId) {\n      this.$router.push(`/users/${userId}/edit`);\n    },\n    async handleDelete(userId) {\n      if (!confirm('本当に削除しますか？')) return;\n      try {\n        const response = await fetch(`http://localhost:8081/api/users/${userId}`, {\n          method: 'DELETE'\n        });\n        const data = await response.json();\n        if (data.success) {\n          alert('削除しました');\n          this.loadAllUsers();\n        } else {\n          alert(data.error || '削除に失敗しました');\n        }\n      } catch (error) {\n        console.error('削除に失敗しました', error);\n        alert('削除に失敗しました');\n      }\n    }\n  }\n};","map":{"version":3,"names":["name","data","currentUsername","users","searchForm","gender","age","food","searchType","created","localStorage","getItem","loadAllUsers","methods","response","fetch","json","console","log","favoriteFoods","error","handleSearch","params","URLSearchParams","append","toString","handleReset","handleLogout","removeItem","$router","push","goToEdit","userId","handleDelete","confirm","method","success","alert"],"sources":["/Users/taharak_tabthinkmacbookpro/eclipse-workspace /tabthink-learning/frontend/src/views/UserListView.vue"],"sourcesContent":["<template>\n  <div class=\"user-list-container\">\n    <div class=\"header\">\n      <div class=\"welcome\">こんにちは {{ currentUsername }}さん</div>\n      <button @click=\"handleLogout\" class=\"logout-btn\">ログアウト</button>\n    </div>\n    \n    <h1>ユーザー一覧</h1>\n    \n    <div class=\"search-section\">\n      <h2>検索条件</h2>\n      <div class=\"search-form\">\n        <div class=\"form-row\">\n          <div class=\"form-group\">\n            <label>名前</label>\n            <input v-model=\"searchForm.name\" type=\"text\" placeholder=\"部分一致\" />\n          </div>\n          \n          <div class=\"form-group\">\n            <label>性別</label>\n            <select v-model=\"searchForm.gender\">\n              <option value=\"\">すべて</option>\n              <option value=\"男\">男</option>\n              <option value=\"女\">女</option>\n              <option value=\"その他\">その他</option>\n            </select>\n          </div>\n          \n          <div class=\"form-group\">\n            <label>年齢</label>\n            <input v-model.number=\"searchForm.age\" type=\"number\" placeholder=\"完全一致\" />\n          </div>\n          \n          <div class=\"form-group\">\n            <label>好きな食べ物</label>\n            <input v-model=\"searchForm.food\" type=\"text\" placeholder=\"部分一致\" />\n          </div>\n        </div>\n        \n        <div class=\"form-row\">\n          <div class=\"form-group\">\n            <label>検索タイプ</label>\n            <div class=\"radio-group\">\n              <label><input type=\"radio\" v-model=\"searchForm.searchType\" value=\"AND\" /> AND検索</label>\n              <label><input type=\"radio\" v-model=\"searchForm.searchType\" value=\"OR\" /> OR検索</label>\n            </div>\n          </div>\n        </div>\n        \n        <div class=\"button-group\">\n          <button @click=\"handleSearch\" class=\"search-btn\">検索</button>\n          <button @click=\"handleReset\" class=\"reset-btn\">リセット</button>\n        </div>\n      </div>\n    </div>\n    \n    <div class=\"result-section\">\n      <h2>検索結果 ({{ users.length }}件)</h2>\n      \n      <div v-if=\"users.length === 0\" class=\"no-data\">データがありません</div>\n      \n      <table v-else class=\"user-table\">\n        <thead>\n          <tr>\n            <th>ID</th>\n            <th>名前</th>\n            <th>性別</th>\n            <th>年齢</th>\n            <th>郵便番号</th>\n            <th>住所</th>\n            <th>電話番号</th>\n            <th>国籍</th>\n            <th>好きな食べ物</th>\n            <th>メニュー</th>\n          </tr>\n        </thead>\n        <tbody>\n          <tr v-for=\"user in users\" :key=\"user.id\">\n            <td>{{ user.id }}</td>\n            <td>{{ user.name }}</td>\n            <td>{{ user.gender }}</td>\n            <td>{{ user.age }}</td>\n            <td>{{ user.postalCode }}</td>\n            <td>{{ user.prefecture }}{{ user.city }}{{ user.address }}</td>\n            <td>{{ user.phoneNumber }}</td>\n            <td>{{ user.nationality }}</td>\n            <td>{{ user.favoriteFoods && user.favoriteFoods.length > 0 ? user.favoriteFoods.map(f => f.foodName).join(', ') : 'なし' }}</td>\n            <td>\n              <button @click=\"goToEdit(user.id)\" class=\"edit-btn\">編集</button>\n              <button @click=\"handleDelete(user.id)\" class=\"delete-btn\">削除</button>\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: 'UserListView',\n  data() {\n    return {\n      currentUsername: '',\n      users: [],\n      searchForm: {\n        name: '',\n        gender: '',\n        age: null,\n        food: '',\n        searchType: 'AND'\n      }\n    }\n  },\n  created() {\n    this.currentUsername = localStorage.getItem('username') || 'ゲスト'\n    this.loadAllUsers()\n  },\n  methods: {\n    async loadAllUsers() {\n      try {\n        const response = await fetch('http://localhost:8081/api/users/list')\n        const data = await response.json()\n        console.log('取得したユーザーデータ:', data)\n        console.log('最初のユーザーのfavoriteFoods:', data[0]?.favoriteFoods)\n        this.users = data\n      } catch (error) {\n        console.error('ユーザー一覧の取得に失敗しました', error)\n      }\n    },\n    async handleSearch() {\n      const params = new URLSearchParams()\n      if (this.searchForm.name) params.append('name', this.searchForm.name)\n      if (this.searchForm.gender) params.append('gender', this.searchForm.gender)\n      if (this.searchForm.age) params.append('age', this.searchForm.age)\n      if (this.searchForm.food) params.append('food', this.searchForm.food)\n      params.append('searchType', this.searchForm.searchType)\n      try {\n        const response = await fetch(`http://localhost:8081/api/users/search?${params.toString()}`)\n        const data = await response.json()\n        this.users = data\n      } catch (error) {\n        console.error('検索に失敗しました', error)\n      }\n    },\n    handleReset() {\n      this.searchForm = {\n        name: '',\n        gender: '',\n        age: null,\n        food: '',\n        searchType: 'AND'\n      }\n      this.loadAllUsers()\n    },\n    handleLogout() {\n      localStorage.removeItem('username')\n      this.$router.push('/login')\n    },\n    goToEdit(userId) {\n      this.$router.push(`/users/${userId}/edit`)\n    },\n    async handleDelete(userId) {\n      if (!confirm('本当に削除しますか？')) return\n      try {\n        const response = await fetch(`http://localhost:8081/api/users/${userId}`, { method: 'DELETE' })\n        const data = await response.json()\n        if (data.success) {\n          alert('削除しました')\n          this.loadAllUsers()\n        } else {\n          alert(data.error || '削除に失敗しました')\n        }\n      } catch (error) {\n        console.error('削除に失敗しました', error)\n        alert('削除に失敗しました')\n      }\n    }\n  }\n}\n</script>\n\n<style scoped>\n.user-list-container { padding: 20px; max-width: 1400px; margin: 0 auto; }\n.header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }\n.welcome { font-size: 18px; font-weight: bold; }\n.logout-btn { padding: 8px 16px; background-color: #f44336; color: white; border: none; border-radius: 4px; cursor: pointer; }\n.logout-btn:hover { background-color: #d32f2f; }\nh1 { margin-bottom: 20px; }\n.search-section { background-color: #f5f5f5; padding: 20px; border-radius: 8px; margin-bottom: 20px; }\nh2 { margin-bottom: 15px; }\n.search-form .form-row { display: flex; gap: 15px; margin-bottom: 15px; flex-wrap: wrap; }\n.form-group { display: flex; flex-direction: column; flex: 1; min-width: 150px; }\n.form-group label { margin-bottom: 5px; font-weight: bold; }\n.form-group input, .form-group select { padding: 8px; border: 1px solid #ddd; border-radius: 4px; }\n.radio-group { display: flex; gap: 15px; }\n.radio-group label { display: flex; align-items: center; gap: 5px; font-weight: normal; }\n.button-group { display: flex; gap: 10px; }\n.search-btn, .reset-btn { padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; font-weight: bold; }\n.search-btn { background-color: #4CAF50; color: white; }\n.search-btn:hover { background-color: #45a049; }\n.reset-btn { background-color: #9E9E9E; color: white; }\n.reset-btn:hover { background-color: #757575; }\n.result-section { margin-top: 20px; }\n.no-data { text-align: center; padding: 40px; color: #999; }\n.user-table { width: 100%; border-collapse: collapse; background-color: white; }\n.user-table th, .user-table td { padding: 12px; text-align: left; border-bottom: 1px solid #ddd; }\n.user-table th { background-color: #f5f5f5; font-weight: bold; }\n.user-table tr:hover { background-color: #f9f9f9; }\n.edit-btn, .delete-btn { padding: 6px 12px; border: none; border-radius: 4px; cursor: pointer; margin-right: 5px; }\n.edit-btn { background-color: #2196F3; color: white; }\n.edit-btn:hover { background-color: #0b7dda; }\n.delete-btn { background-color: #f44336; color: white; }\n.delete-btn:hover { background-color: #d32f2f; }\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}